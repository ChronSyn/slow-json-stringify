!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.slowJsonStringify={})}(this,function(r){var e=function(r,n){for(var t in r){if(t===n)return[t];if(r[t]&&"object"==typeof r[t]){var u=e(r[t],n);if(u)return u.unshift(t),u}}},n=function(r,e){return e.reduce(function(r,e){return r&&r[e]},r)},t=function(r,e){if("array-simple"===e)return JSON.stringify(r);for(var n="",t=0,u=r;t<u.length;t+=1)n+=e(u[t])+",";return"["+n.substr(0,n.length-1)+"]"};r.sjs=function(r){var u=function(r){var n={},t=new Map,u="",i=JSON.stringify(r,function(i,o){var a=Array.isArray(o);return("object"!=typeof o||a)&&(a&&t.set(i,o[0]),function(r){var e=new Set(["number","string","boolean","undefined","array-simple","function"]);if(Array.isArray(r)){if(e.has(r[0])||e.has(typeof r[0]))return;throw new Error('Expected either "array-simple" or a function. received '+r)}if("function"!=typeof r&&!e.has(r))throw new Error('Expected one of: "number", "string", "boolean", "undefined". received '+r)}(o),n[i]=e(r,i),u+='"'+i+'"|'),o});return{map:n,arrais:t,props:u,str:i}}(r),i=u.map,o=u.arrais,a=function(r,e){var n=[],t=r.replace(e,function(r){switch(r){case'"string"':case'"undefined"':return'"__par__"';case'"number"':case'"boolean"':case'["array-simple"]':case"[null]":return"__par__";default:var e=r.match(/(?<=\").+?(?=\")/)[0];return n.push(e),r}}).split("__par__");return{queue:n,chunks:t}}(u.str,new RegExp(u.props+'"(string|number|boolean|undef)"|\\[(.*?)\\]',"gm")),f=a.queue,s=a.chunks,c=s[s.length-1],p=function(r){return function(e,n){if(void 0!==e)return e;var t=r[n];return 34===t.charCodeAt(t.length-1)?e:'"'+e+'"'}}(s),d=f.length;return function(r){for(var e="",u=0;u!==d;){var a=f[u],l=n(r,i[a]),h=o.has(a)?t(l,o.get(a)):l;e+=s[u]+p(h,u),u+=1}return e+c}},r.escape=function(r){var e=r||new RegExp('\\n|\\r|\\t|\\"|\\\\',"gm");return function(r){return r.replace(e,function(r){return"\\"+r})}}});
//# sourceMappingURL=sjs.umd.js.map
