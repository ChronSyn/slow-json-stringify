!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.slowJsonStringify={})}(this,function(r){var e=function(r,n){for(var t in r){if(t===n)return[t];if(r[t]&&"object"==typeof r[t]){var i=e(r[t],n);if(i)return i.unshift(t),i}}};r.sjs=function(r){var n=function(r){var n={},t=new Map,i="",o=JSON.stringify(r,function(o,u){var a=Array.isArray(u);return("object"!=typeof u||a)&&(a&&t.set(o,u[0]),function(r){var e=new Set(["number","string","boolean","array-simple","function"]);if(Array.isArray(r)){if(e.has(r[0])||e.has(typeof r[0]))return;throw new Error('Expected either "array-simple" or a function. received '+r)}if("function"!=typeof r&&!e.has(r))throw new Error('Expected one of: "number", "string", "boolean". received '+r)}(u),n[o]=e(r,o),i+='"'+o+'"|'),u});return{map:n,arrais:t,props:i,str:o}}(r),t=n.map,i=n.arrais,o=function(r,e){var n=[],t=r.replace(e,function(r){switch(r){case'"string"':return'"__par__"';case'"number"':case'"boolean"':case'["array-simple"]':case"[null]":return"__par__";default:var e=r.match(/(?<=\").+?(?=\")/)[0];return n.push(e),r}}).split("__par__");return{queue:n,chunks:t}}(n.str,new RegExp(n.props+'"(string|number|boolean)"|\\[(.*?)\\]',"gm")),u=o.queue,a=o.chunks,f=a[a.length-1];return function(r){var e="";return u.forEach(function(n,o){var u=function(r,e){return t[n].reduce(function(r,e){return r&&r[e]},r)}(r),f=i.has(n)?function(r,e){if("array-simple"===e)return JSON.stringify(r);for(var n="",t=0,i=r;t<i.length;t+=1)n+=e(i[t])+",";return"["+n.substr(0,n.length-1)+"]"}(u,i.get(n)):u;e+=a[o]+f}),e+f}},r.escape=function(r){var e=new RegExp(r||'\\n|\\r|\\t|\\"|\\\\',"gm");return function(r){return r.replace(e,function(r){return"\\"+r})}}});
//# sourceMappingURL=sjs.umd.js.map
